<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.chart.*?>

<BorderPane xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="kz.enu.museum.controller.StatisticsController"
            prefHeight="700" prefWidth="1000">
    
    <top>
        <VBox style="-fx-padding: 20; -fx-background-color: #1976D2;">
            <Label text="ðŸ“Š Ð¡Ñ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ° Ð¼ÑƒÐ·ÐµÑ" style="-fx-text-fill: white; -fx-font-size: 24px; -fx-font-weight: bold;"/>
            <Label fx:id="dateLabel" text="ÐžÑ‚Ñ‡Ñ‘Ñ‚ Ð½Ð°:" style="-fx-text-fill: white; -fx-font-size: 14px;"/>
        </VBox>
    </top>
    
    <center>
        <ScrollPane fitToWidth="true" style="-fx-background-color: transparent;">
            <VBox spacing="20" style="-fx-padding: 20;">
                
                <!-- ÐžÐ±Ñ‰Ð°Ñ Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ñ -->
                <GridPane styleClass="card" hgap="20" vgap="15">
                    <columnConstraints>
                        <ColumnConstraints percentWidth="50"/>
                        <ColumnConstraints percentWidth="50"/>
                    </columnConstraints>
                    
                    <VBox GridPane.rowIndex="0" GridPane.columnIndex="0" spacing="5">
                        <Label text="Ð’ÑÐµÐ³Ð¾ ÑÐºÑÐ¿Ð¾Ð½Ð°Ñ‚Ð¾Ð²:" style="-fx-font-weight: bold;"/>
                        <Label fx:id="totalExhibitsLabel" text="0" style="-fx-font-size: 36px; -fx-text-fill: #1976D2;"/>
                    </VBox>
                    
                    <VBox GridPane.rowIndex="0" GridPane.columnIndex="1" spacing="5">
                        <Label text="ÐÐ° ÑÐºÑÐ¿Ð¾Ð·Ð¸Ñ†Ð¸Ð¸:" style="-fx-font-weight: bold;"/>
                        <Label fx:id="onDisplayLabel" text="0" style="-fx-font-size: 36px; -fx-text-fill: #4CAF50;"/>
                    </VBox>
                    
                    <VBox GridPane.rowIndex="1" GridPane.columnIndex="0" spacing="5">
                        <Label text="Ð’ Ñ…Ñ€Ð°Ð½Ð¸Ð»Ð¸Ñ‰Ðµ:" style="-fx-font-weight: bold;"/>
                        <Label fx:id="inStorageLabel" text="0" style="-fx-font-size: 36px; -fx-text-fill: #FF9800;"/>
                    </VBox>
                    
                    <VBox GridPane.rowIndex="1" GridPane.columnIndex="1" spacing="5">
                        <Label text="ÐÐ° Ñ€ÐµÑÑ‚Ð°Ð²Ñ€Ð°Ñ†Ð¸Ð¸:" style="-fx-font-weight: bold;"/>
                        <Label fx:id="onRestorationLabel" text="0" style="-fx-font-size: 36px; -fx-text-fill: #F44336;"/>
                    </VBox>
                </GridPane>
                
                <!-- Ð”Ð¸Ð°Ð³Ñ€Ð°Ð¼Ð¼Ñ‹ -->
                <HBox spacing="20">
                    <!-- ÐšÑ€ÑƒÐ³Ð¾Ð²Ð°Ñ Ð´Ð¸Ð°Ð³Ñ€Ð°Ð¼Ð¼Ð°: ÑÑ‚Ð°Ñ‚ÑƒÑÑ‹ -->
                    <VBox styleClass="card" spacing="10" HBox.hgrow="ALWAYS">
                        <Label text="Ð Ð°ÑÐ¿Ñ€ÐµÐ´ÐµÐ»ÐµÐ½Ð¸Ðµ Ð¿Ð¾ ÑÑ‚Ð°Ñ‚ÑƒÑÐ°Ð¼" styleClass="card-header"/>
                        <PieChart fx:id="statusPieChart" prefHeight="300" legendVisible="true"/>
                    </VBox>
                    
                    <!-- ÐšÑ€ÑƒÐ³Ð¾Ð²Ð°Ñ Ð´Ð¸Ð°Ð³Ñ€Ð°Ð¼Ð¼Ð°: Ñ‚Ð¸Ð¿Ñ‹ -->
                    <VBox styleClass="card" spacing="10" HBox.hgrow="ALWAYS">
                        <Label text="Ð Ð°ÑÐ¿Ñ€ÐµÐ´ÐµÐ»ÐµÐ½Ð¸Ðµ Ð¿Ð¾ Ñ‚Ð¸Ð¿Ð°Ð¼" styleClass="card-header"/>
                        <PieChart fx:id="typePieChart" prefHeight="300" legendVisible="true"/>
                    </VBox>
                </HBox>
                
                <!-- Ð¡Ñ‚Ð¾Ð»Ð±Ñ‡Ð°Ñ‚Ð°Ñ Ð´Ð¸Ð°Ð³Ñ€Ð°Ð¼Ð¼Ð°: Ð¿Ð¾ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸ÑÐ¼ -->
                <VBox styleClass="card" spacing="10">
                    <Label text="Ð­ÐºÑÐ¿Ð¾Ð½Ð°Ñ‚Ñ‹ Ð¿Ð¾ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸ÑÐ¼" styleClass="card-header"/>
                    <BarChart fx:id="categoryBarChart" prefHeight="300">
                        <xAxis><CategoryAxis label="ÐšÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ñ"/></xAxis>
                        <yAxis><NumberAxis label="ÐšÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾"/></yAxis>
                    </BarChart>
                </VBox>
                
                <!-- Ð¡Ñ‚Ð¾Ð»Ð±Ñ‡Ð°Ñ‚Ð°Ñ Ð´Ð¸Ð°Ð³Ñ€Ð°Ð¼Ð¼Ð°: Ð¿Ð¾ Ð·Ð°Ð»Ð°Ð¼ -->
                <VBox styleClass="card" spacing="10">
                    <Label text="Ð Ð°ÑÐ¿Ñ€ÐµÐ´ÐµÐ»ÐµÐ½Ð¸Ðµ Ð¿Ð¾ Ð·Ð°Ð»Ð°Ð¼" styleClass="card-header"/>
                    <BarChart fx:id="locationBarChart" prefHeight="300">
                        <xAxis><CategoryAxis label="Ð—Ð°Ð»"/></xAxis>
                        <yAxis><NumberAxis label="ÐšÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾"/></yAxis>
                    </BarChart>
                </VBox>
                
            </VBox>
        </ScrollPane>
    </center>
    
    <bottom>
        <HBox styleClass="status-bar" spacing="10">
            <Button text="ðŸ“„ Ð­ÐºÑÐ¿Ð¾Ñ€Ñ‚ PDF" onAction="#handleExportPdf" styleClass="button"/>
            <Button text="ðŸ’¾ Ð­ÐºÑÐ¿Ð¾Ñ€Ñ‚ CSV" onAction="#handleExportCsv" styleClass="button"/>
            <Region HBox.hgrow="ALWAYS"/>
            <Button text="Ð—Ð°ÐºÑ€Ñ‹Ñ‚ÑŒ" onAction="#handleClose" styleClass="button-outlined"/>
        </HBox>
    </bottom>
</BorderPane>
